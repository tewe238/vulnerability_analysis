**

**Vulnerability Layer**
Two types of vulnerability data: 

Age distribution per district with three layers of three different age groups.

OSM data of schools, nursing homes and kindergartens.



*Download:* Extracted the independent layer of age group 0-5 yrs, 65-74 years and over 75 years from Dresden Open Data Portal. https://opendata.dresden.de/informationsportal/#app/mainpage/Bev%C3%B6lkerung///

Extracted schools, kindergarten and nursing homes from OSM Geofabrik Sachsen http://download.geofabrik.de/europe/germany/sachsen.html via feature select.



*Preprocessing*: Clipped the OSM Datasets to the extent of the Dresden Open Data Portal age groups.



**Method for the age distribution layer:**

*Combining the age groups*: Graduated the different percentages of the age group layers in seven classes with Natural Breaks (Jenks) as mode. The three age group layers have been merged through the command: **join attributes by field table**. Choose “id” for combining. Run. Now open the attribute table off the joined layer. You see the attribute tables of the input layers combined. Now open the field calculator and type in “prozent” + “prozent_2”. The percentages will be added up for every district. Do the same with the remaining age group layer. Graduated the different percentages of the age group layers in seven classes with Natural Breaks (Jenks) as mode.
![img](https://lh5.googleusercontent.com/tc7vFGuB5eeRRtGKw3NM-rTl8-78nYZaVR3TFylglhMfGuP6Cgm9jsZvnX3fGsOMAs4NFEKMDuCkLIG6w7DmiUvDotgtFFjvM6Y4QNOss2B4UGSpo9DfAYdne64LGjd3rtehAwPm)![img](https://lh5.googleusercontent.com/npHBLj_xGfB8frPjPTjZFWVzr5yvCXoQKclwET1DPvScT2YwrjP0-gp2LcIENtg1NunaVIrik0bAAw_oymusK6txvnHrYCnW7u7x4k_w4nQoiALjnZU_AF0mQoHPnCIePp-kGznU)![img](https://lh6.googleusercontent.com/x6IA9GcgVCIoeZTk4Xjr_yRVJjKNMT4J4TgUdOs3UkNVfJ1fRy-0vwx-Z2_esY2ZS5zewBrDu1Tf5z2ROtnoXeiivpGAI_-lFj3gJbCI7mbECQsPAlxOmlRldfHPps1gezCWmHd1)Age group 0-5 yearsAge group 60-74 yearsAge group over 75 years
![img](https://lh6.googleusercontent.com/R-6t2TbcaCyZbid0a8GIco3ZSbjadmJtVmlfJdgg0D8j5g2Yv_ON_z0sX0Xil_Jlog7ylHbNkZ10IrmGmfxvg2gIjm7x6iji6AY-C6XDdEjOghGIyMQ_d8t8Lxj8g6ihCvy8v_BX)All age groups combined

*Method for the OSM data*: Interpolation method: created centroid points using the command **centroids** and adding to this new point layer a new field called *value* (make sure its attribute type is integer number ) and give every feature the number 10. Then buffer the centroids with 100m, 500m, 1km, 5km and 10km radius. Dissolve the buffered circles into one polygon using **dissolve** and then use the command **vertices** to generate a point layer out of the boundaries of the polygon layer. Alter the numbers of the field *value* for 100m to 9, 500m to 5, 1km to 1, for 5km to 1 and for 10 km to 1.Merge now all point layers (centroid, 100m, 500m,1km, 5km and 10 km). ![img](https://lh5.googleusercontent.com/vnrJ9hUujPVKCbW2LbzyORNGnjEliW6P3ffTt8N9p9GGMVIAX_BbnLfOwJnWMvXFOH01ZWItmovS-UwX0tWCyH-rDzrfNS-oiM6zOTmACdQ0JjovmWVmvCYTmmTAc71xp746KCDI)Merged point layers

Interpolate the existing merged point layer with the TIN interpolation (IDW interpolation didnt look as convincing). The interpolation attribute is *value*, the extent is such that all the points are within, pixel size is 100. At the end, clip the resulting tin raster to the extent of the age group district shapefile using the command *clip raster by mask layer*. Interpolation done. Note: I kept the 5km and 10km points, because otherwise the TIN interpolation didnt extend over all of Dresden. It seems that the TIN interpolation only went as far as the furthest point data.
![img](https://lh4.googleusercontent.com/u2MMBj9bI6gdkdGeua_R9f7TphOajdBWbhtB_32XlU1fFEOkKAePRjC1HHaDpQ4nYHtvNLb9YVBVmMy-g16q8eNDkuL8-atqIODD2eLI9OVNcotaVM9sbPgbINvnTgJJnI7zU1q-)TIN linear Interpolation result
![img](https://lh5.googleusercontent.com/DLJQo7kXSrK2iSiW5_FAjjgUR2fDo3L9-RBE5SVQjYikFcQku1U-XmAD_1oQ43YRy2vKhkPNwr17dZSnQPHJetQdViUXZM7cLPFWXTw48Oj2FRKgB1soSB_UNu0_xbV0_8AVT9NA)

Result of the IDW Interpolation

![img](https://lh6.googleusercontent.com/iOqn1WKTAhtBavW8fTXPh9M-AmrpOyuLKuq9LapUiNeD2O4wBH-s3aEw-VhzmgXbOU0k06IZSOgaOBblkRV1jhZrJLEAhZP9EKoFGIgI3E290EFvwSNFy2p1R0Xu0BENRLVwbWXy)

Result of the TIN Clough-Toucher (cubic) Interpolation

*Counting method*: Count all the polygons (school, kidergarten, nursing home) inside the districts. The districts with many of those polygons are more vulnerable. *Preprocessing*: merge buildings and compute the centroids of each polygon. Convert the building polygons into centroid point layer and then use **count points in polygon**. ![img](https://lh5.googleusercontent.com/mgiSRRSxBWz_uRi2jddNdPlP-bSR9JJ3tBgHIrJMxofaDaJ8NPUNPWUKlSspWs-Oc8WETqTvaYeWQmh-qgm78x2MsYMRNHr-uJowkdt5gK08GYPEO9ao8OMi_Vs7AufH2xA-HFrA)Result of the counting points method

*Combining the layers*: For combining raster and vector layers, the command **zonal statistics** can be used. This command calculates for every vector feature statistics on the basis of the raster layer (e.g. mean, min max etc.).In our case, I used the combined age group layer as the input vector layer and the result from the interpolation of the OSM data. After the calculation, I chose the “mean” values to be shown and graduated them in seven classes with Natural Breaks (Jenks) as mode.
![img](https://lh4.googleusercontent.com/u2MMBj9bI6gdkdGeua_R9f7TphOajdBWbhtB_32XlU1fFEOkKAePRjC1HHaDpQ4nYHtvNLb9YVBVmMy-g16q8eNDkuL8-atqIODD2eLI9OVNcotaVM9sbPgbINvnTgJJnI7zU1q-)

TIN linear interpolation layer

![img](https://lh6.googleusercontent.com/R-6t2TbcaCyZbid0a8GIco3ZSbjadmJtVmlfJdgg0D8j5g2Yv_ON_z0sX0Xil_Jlog7ylHbNkZ10IrmGmfxvg2gIjm7x6iji6AY-C6XDdEjOghGIyMQ_d8t8Lxj8g6ihCvy8v_BX)Combined age group layer
![img](https://lh6.googleusercontent.com/kB4zeo411KhUwh4JvQx6MqC3FnABfZZnrno2V3VogFwT7KF6IggYsVK6kG6biNWzNLUNCn0el8yh4AGAb460OMopkihmGVVLsGkI1i-BK_ieb8ogWANbNKBIYno1VGu8GFr7ZvVp)Result of the combination of the age group layer with the interpolation 

Also, I did combine the age group layer with the resulting layer from the counting method. Since these are two vector layers, I used a non-spatial join to combine them. First, I created a new empty field for the input layer (could be either of the two layers). For the join, I used the command **join attribute by field value**. As table field, I used “id”. After the join, I opened the properties of the input laye, clicked on “join”, then on the plus and made sure that the join field and target field were the same. Then, I opened the attribute table of the input layer and updated the new empty field with the value from the join I needed. Since for me the counting method result layer was the input layer, I updated it with the percentage of the combined age groups. After that, the joined layer could be removed again. I chose this method, because this way the attribute table is not so overloaded with fields. As the last step, I created a new field with the field calculator and added the percentage with the counted number of points. This was also graduated in seven classes with Natural Breaks (Jenks) as mode. (Note: the graphical modeler just adds all the tables together and calculates a new field with the sum of the percentage and the counted points)
![img](https://lh4.googleusercontent.com/P7AOBmkAwDFStJyLCpTXqlakW0GRBa3nWcW73Bxjy5r7ALUdXvMRJ2QElHyZZkGzbJReS35vwLbre5ZVe8tQL-MOJfI1tWg8uemodsczDexhyxlMfMJnt1XI9wA4xhPhjtcIezvV)

Counting points layer

![img](https://lh6.googleusercontent.com/R-6t2TbcaCyZbid0a8GIco3ZSbjadmJtVmlfJdgg0D8j5g2Yv_ON_z0sX0Xil_Jlog7ylHbNkZ10IrmGmfxvg2gIjm7x6iji6AY-C6XDdEjOghGIyMQ_d8t8Lxj8g6ihCvy8v_BX)Combined age group layer
![img](https://lh3.googleusercontent.com/tK2i6Y_GmiMEF2iq9greTF9gSSN5QJAu76MlHy2Ts2b6iN3kPmfgSXiLTxC9kapn1CoSAlZ6pjIG7NubekUyyO_vh-fgOUSeUqSjzhyhxsBAa85XhyBHt0kv7-o09KlLWJXA9taf)Result of the combination of the age groups with the counting points layer